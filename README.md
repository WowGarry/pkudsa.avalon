# 游戏《阿瓦隆》<span style="font-size: smaller;">`pkudsa.avalon`</span>

（2025年春季数算B课程大作业）

---

## 参考游戏《阿瓦隆》玩法链接
- [桌游《阿瓦隆(Avalon)》教学教程 完全指南](https://zhuanlan.zhihu.com/p/685062276)
- [卡牌《阿瓦隆》攻略](https://zhuanlan.zhihu.com/p/546211143)
- [不思议阿瓦隆攻略，阿瓦隆游戏攻略大全](https://www.youfanx.com/gonglue/202405/467216.html)

---

## 背景故事

（等待搭嘎的创意发挥🌟）

---

## 七人局《阿瓦隆》游戏规则

### 一、基本概念（名词解释）

#### 1. **“任务”**

**任务**是该游戏中比较抽象的一个概念，但它直接决定了游戏的胜负。

游戏会执行五轮**任务**，双方阵营中的一部分玩家会共同参与每轮**任务**，**任务**可能会**成功**或**失败**，若一轮任务成功**记蓝色阵营胜利1次**，反之任务失败**记红色阵营胜利1次**，累积<span style="color: red">**先胜利3次的阵营宣告最终获胜**</span>，即五局三胜制。因此蓝色阵营要尽力让每轮任务成功，红色阵营则要尽可能破坏每轮任务。

**任务成功或失败的判定规则将在后文“回合规则”中介绍。**

#### 2. **阵营与角色**

每局游戏中，七名玩家将扮演以下六种角色：

- **骑士阵营（蓝方）**  
  - **胜利目标**：使三轮任务成功。
  - **角色能力**：
    - **梅林 (Loyal Coutier)**：夜晚阶段可看到所有红方玩家（除莫德雷德）。
    - **派西维尔 (Percival)**：夜晚阶段看到梅林和莫甘娜（但无法区分两者）。
    - **骑士 (Knight)**：无特殊能力，需隐藏派西维尔身份并积极参与任务。

- **反抗军阵营（红方）**
  - **胜利目标**：使三轮任务失败，或通过刺杀梅林反败为胜。
  - **角色能力**：
    - **莫甘娜 (Morgana)**：假扮梅林，与刺客、爪牙互认（奥伯伦除外）。
    - **刺客 (Assassin)**：在蓝方三轮任务成功后，可刺杀梅林（成功则红方胜利）。
    - **奥伯伦 (Oberon)**：红方成员，但与其他红方玩家不互认（红方队友也看不到他）。

**除骑士有2人外，其他角色有且只有1人。**  

#### 3. **核心机制**
- **任务**
  - **每轮任务人数**（七人局）：
    | 轮次 | 第1轮 | 第2轮 | 第3轮 | 第4轮（保护性） | 第5轮 |  
    |------|-------|-------|-------|----------------|-------|  
    | 人数 | 2人   | 3人   | 3人   | 4人           | 4人   |  
  - **保护性规则**：第4轮任务需至少两张失败票才会导致任务失败。

- **夜晚阶段**
  - 红方（除奥伯伦）闭眼互认身份，梅林查看红方（除莫德雷德），派西维尔查看梅林和莫甘娜。


### 二、回合规则

#### 1. **初始阶段**
- 分发角色卡，随机选择首轮队长（后续队长按顺时针轮换）。  
- 玩家获得公投投票卡（支持/反对）。  

#### 2. **夜晚阶段**
1. 所有玩家闭眼，竖起大拇指表示“清醒”。  
2. **红方互认**（除奥伯伦）：莫甘娜、刺客、爪牙睁眼确认队友。  
3. **梅林睁眼**：查看所有红方玩家（除莫德雷德）。  
4. **派西维尔睁眼**：查看梅林和莫甘娜（但无法区分）。  

#### 3. **执行任务流程（共循环5轮）**
1. **队长组队**  
   - 当前轮次的队长按当前轮次要求提名任务执行者（如第1轮选2人）。
   - 可自由选择是否包含自己。  

2. **发言环节**  
   - 玩家按顺时针或逆时针轮流发言，队长最后发言。
   - 发言内容需分析身份、质疑组队合理性。

3. **公投表决**  
   - 所有玩家同时公开投票（支持/反对）。
   - **通过条件**：支持票过半 → 执行任务。
   - **否决条件**：反对票过半 → 不执行任务（跳过4），顺时针更换队长重新组队。
   - **连续三次否决**：第四次组队强制执行。

4. **任务执行**  
   - 执行任务的玩家匿名投票（蓝方必须投成功票，红方可投成功或失败票）。
   - **任务结果判定**：  
     - 第1-3、5轮：1张失败票即任务失败。
     - 第4轮（保护性）：需至少2张失败票才会失败。

### 三、胜负判定

#### 1. **蓝方胜利条件**
- 累计三轮任务成功，且刺客刺杀梅林失败。

#### 2. **红方胜利条件**
- 累计三轮任务失败；
- 或蓝方达成三轮任务成功后，刺客成功刺杀梅林。

---

## 各小组成员需要做什么

- 编写程序，使得自己的程序能够胜任《阿瓦隆》游戏玩家的角色！

- 在自己的程序中找到合适时机调用大语言模型（LLM）来进行判断其他玩家的发言、组织自己的发言以及辅助决策等操作！

---

## 对各小组程序的评价机制

（等待商讨😋）

---

## 预选赛

---

## 决赛

